// App
// ==
[id="app"] {
  background: $app-bg !important;
  color: $app-color !important;
}

[id="app.error"] {
  .error-icon,
  .error-code {
    color: $app-gray-100;
  }
}

[id="app.login"] {
  .logo-icon {
    color: $app-primary;
  }

  .login-box {    
    @include media-breakpoint-up(sm) {
      border: .5px solid $app-border-color;
      background: $app-main;
    }
  }
}

// ## repos
[id="repos"] {
  .topbar > .navbar {
    background: $app-main !important;
    box-shadow: 0 1px 2px rgba($app-shadow-color, .1);
    z-index: 1030;
  }
}

// ## workbench.aside
[id="workbench.aside"] {
  background: $app-sidebar-bg !important;

  .topbar > .navbar {
    background: $app-sidebar-bg !important;
    box-shadow: 0 1px 2px rgba($app-shadow-color, .1);
    z-index: 1030;
  }

  .a2hs-logo {
    box-shadow: 0 1px 1px rgba($app-shadow-color, .4);
  }

  .aside-open & {
    @include media-breakpoint-down(sm) {
      box-shadow: 3px 0 3px rgba($app-shadow-color, .1);
    }
  }  
}

// ## workbench.aside.sidebar.explorer
[id="workbench.aside.sidebar.explorer"] {
  .explorer-repo-name {
    background: $app-lighter-bg;
    box-shadow: 0 1px 2px rgba($app-shadow-color, .1);

    > span:hover {
      font-size: bold;
      color: $app-primary;
    }
  }

  .explorer-latest,
  .explorer-rand,
  .list-nested .list-group .list-group-item  {
    &.active {
      background: $app-lighter-bg;
      color: $app-color;
    }

    &:hover {
      background: $app-bg;
    }

    &.active:hover {
      background: darken($app-lighter-bg, 5%);
    }
  }

  .list-nested .manga-group-item {
    .list-group .list-group-item {
      background: $white;
      border-bottom: .5px solid $app-border-color;

      &:hover {
        background: $app-item-hover-bg;
      }
    }

    .manga-group-btn {
      border: .5px solid $app-muted-color;
    }
  }
}

// ## workbench.aside.sidebar.watchOnMobile
[id="workbench.aside.sidebar.watchOnMobile"] {
  .qrcode-wrapper .qrcode {
    background: $app-main;
    border: .5px solid $app-border-color;
  }
}

// ## workbench.aside.menubar
[id="workbench.aside.menubar"] {
  background: $app-sidebar-menubar-bg;

  .menubar-btn.active {
    &::after {
      background: $app-primary !important;
    }
  }
}

// ## workbench.main.manga
[id="workbench.main.manga"] {
  .header > .navbar {
    background: $app-main !important;
    box-shadow: 0 1px 2px rgba($app-shadow-color, .1);
    z-index: 1030;

    &.no-shadow {
      box-shadow: none;
    }

    & + .addressbar {
      box-shadow: 0 1px 2px rgba($app-shadow-color, .1);
      z-index: 1020;
    }
  }

  // metadata
  .metadata-info,
  .metadata-actions {
    background: $app-main;
    border-bottom: .5px solid $app-border-color;
  }

  .metadata-actions {
    color: $app-muted-color;
  }

  .metadata-versions .list-group-item {
    border-left: 3px solid $app-border-color !important;
  
    &.version-active {
      border-left-color: $app-primary !important;
      color: $app-primary !important;
    }
  }

  .area-container {
    background: $app-bg !important;
  }

  .area-header {
    color: $app-muted-color;
    background: $app-bg !important;
  }

  .area-header-inner {
    border-color: $app-border-color !important;
  }

  .area-header a {
    color: $app-muted-color;

    &:hover {
      color: $app-primary;
    }
  }

  // manga item style
  .manga-item {
    .cover {
      border-bottom: 0;
    }

    .badge {   
      border: .5px solid $app-muted-color;
      color: $app-muted-color;
    }

    .manga-status {
      color: $app-primary;
    }

    .manga-version-labels {  
      ul {
        box-shadow: 0px 0px 2px $app-border-color;   
      }
  
      li {
        color: $app-main;
        background-color: rgba($app-gray-300, .85);
        border-bottom: .5px solid $app-gray-200;

        &::after {
          border-right: 2px solid $app-primary;
        }
      }
    
      > ul > li:hover { 
        background-color: $app-primary; 
      }
    }
  }

  .cover {
    //border: .5px solid $app-border-color;

    img,
    .cover-placeholder {
      background: $app-cover-bg;
      color: #ccc;
    }
  }

  .manga-area,
  .chapter-area,
  .gallery-area {
    .row {
      border-color: $app-border-color;
    }
  }

  .file-area {
    .area-item-inner {
      background: $app-light-bg;
      box-shadow: 0 4px 8px -4px rgba($app-shadow-color, .4);         
    }

    .area-item:hover {
      .area-item-inner { 
        filter: brightness(90%);
      }

      .caption {
        color: $app-primary;
      }
    }

    .area-item.active {
      .area-item-inner {
        background: $app-light-bg;
        box-shadow: 0 0 0 4px $app-grid-active-bg,
                    0 4px 8px -4px rgba($app-shadow-color, .4);
      }  
    }
  }

  .manga-area,
  .chapter-area {
    .manga-item {
      .cover-inner {
        box-shadow: 0 4px 8px -4px rgba($app-shadow-color, .4);
      } 
    }

    .list-group-item:hover {
      .badge {
        color: $app-primary;
        border-color: $app-primary;
      }
    }

    .list-group-item.active {
      .badge {
        background-color: $app-primary;
        color: $white;
        border-color: $app-primary;
      }
    }

    .area-item:hover {
      .cover {        
        img,
        .cover-placeholder {
          filter: brightness(90%);
        }
      }
      
      .caption {
        color: $app-primary;
      }
    }

    .area-item.active {
      .cover-inner {
        box-shadow: 0 0 0 4px $app-grid-active-bg,
                    0 4px 8px -4px rgba($app-shadow-color, .4);
      }
    }
  }

  .gallery-area {
    .row {
      background: $app-main;

      .active .cover {
        box-shadow: 0 0 0 4px $app-grid-active-bg;
      }
    }
  }

  .list-group {
    .list-group-item {
      &.active {
        color: $app-color;
        background: $app-item-active-bg;
        border-color: $app-border-color;
      }
    }
  }

  .addressbar {
    background: $app-main;
  
    .address-item:not(.muted) {
      &:hover {
        background: $app-border-color;
      }
    }
    
    .address-separator {
      color: $app-color;
    }
  }

  .manga-version-loading,
  .data-view-loading-mask {
    background-color: $app-main;
  }
}

// Common
// ==
.list-group .list-group-item {
  border-radius: 0;
  border-color: $app-border-color;

  &.disabled {
    background: $app-light-bg;
  }
}

.text-muted {
  color: $app-muted-color !important
}

// ## common.placeholder.color
::placeholder {
  color: $app-light-300 !important;
  font-size: .85em;
}

// ## common.scrollbar.track
::-webkit-scrollbar-track {
  background-color: $app-scrollbar-track;
}

// ## common.scrollbar.thumb
::-webkit-scrollbar-thumb {
  background-color: $app-scrollbar-track;
}

:hover::-webkit-scrollbar-thumb {
  background-color: $app-scrollbar-thumb;
}

body::-webkit-scrollbar-thumb {
  background-color: $app-scrollbar-thumb !important;
}


// Viewer (support themes later)
// ==

$viewer-bg: #000;
$viewer-color: #eee;
$viewer-toolbar-bg: #333;

body.viewer-active,
.viewer-active #app {
  background: $viewer-bg !important;
} 

body.viewer-active {
  &::-webkit-scrollbar-track {
    background-color: $viewer-bg;
  }
  
  &::-webkit-scrollbar-thumb {
    background-color: #666 !important;
  }
}

#viewer {
  background: $viewer-bg !important;
  color: $viewer-color !important;

  .viewer-topbar .navbar,
  .viewer-toolbar .navbar {
    background: $viewer-toolbar-bg !important;
    box-shadow: 0px 2px 4px 0px rgba($app-shadow-color, 0.3);
  }

  .viewer-loading {
    background: $viewer-bg;

    .loading-spinner {
      color: $viewer-color;
    }
  }

  .viewer-seekbar-container,
  .viewer-seekbar-tip {
    background: rgba($viewer-bg, .8);
  }

  .viewer-page-indicator {
    background: rgba($viewer-bg, .8);
  }

  .dropdown-menu {
    background: $viewer-toolbar-bg !important;
    color: $viewer-color !important;
    box-shadow: 0 2px 4px -1px rgba($app-shadow-color, 0.2), 
                0 4px 5px 0 rgba($app-shadow-color, 0.14), 
                0 1px 10px 0 rgba($app-shadow-color, 0.12);

    .dropdown-item:hover {
      background: rgba($white, .1);      
    }
  }

  .viewer-settings {
    background: $viewer-toolbar-bg !important;
    color: #ccc !important;
    border-color: #ccc !important;
    box-shadow: 0 2px 4px -1px rgba($app-shadow-color, 0.2), 
                0 4px 5px 0 rgba($app-shadow-color, 0.14), 
                0 1px 10px 0 rgba($app-shadow-color, 0.12);
  }
  
  .viewer-chapter-list {
    background: $viewer-toolbar-bg !important;
    color: #ccc !important;
    box-shadow: -2px 0 4px rgba($app-shadow-color, 0.2);

    header {
      background-color: #333;
    }

    .viewer-chapter-list-actions {
      background-color: #666;
    }

    .list-group-item {
      background: $viewer-toolbar-bg !important;
      color: #ccc;
      border-color: #555;

      &.active {
        background-color: #666 !important;
        color: #fff !important;
        font-weight: 500;
      }

      &:hover {
        color: $app-primary;
      }
    }
  }

  .viewer-version-select {
    background: rgba($viewer-toolbar-bg, .8) !important;

    .list-group {
      box-shadow: 0 2px 4px -1px rgba($app-shadow-color, 0.2), 
                  0 4px 5px 0 rgba($app-shadow-color, 0.14), 
                  0 1px 10px 0 rgba($app-shadow-color, 0.12);
    }

    .list-group-item {
      background-color: $viewer-toolbar-bg !important;
      border-color: #555;

      &:hover {
        color: $app-primary;
      }
    }
  }
}